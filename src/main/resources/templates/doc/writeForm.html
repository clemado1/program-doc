<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/doc_common :: docHead"><title></title></head>
<body>
<div th:replace="fragments/doc_common :: docBody"></div>
<form method="post" th:action="@{/doc/save}">
    <input id="docId" name="docId" type="hidden"/>
    <h1>writeform</h1>
    <input id="title" name="title" placeholder="title" type="text"/>
    version: <input id="version" name="version" step="0.01" type="number" value="1.00"/>
    <input id="programCd" name="programCd" placeholder="programCd" type="text"/>
    <div id="editor"></div>
    <script>
        const Editor = toastui.Editor;
        const codeSyntaxHighlight = Editor.plugin.codeSyntaxHighlight;
        const editor = new Editor({
            el: document.querySelector('#editor'),
            height: '600px',
            initialEditType: 'markdown',
            previewStyle: 'vertical',
            plugins: [codeSyntaxHighlight]
        });

        editor.getHtml();
    </script>
    <input id="contents" name="contents" type="hidden">
    <button id="form-submit" th:text="Save" type="submit"></button>
</form>
<script>
    const saveBtn = document.querySelector("#form-submit");
    saveBtn.addEventListener('click', function () {
        let contents = document.querySelector("#contents");
        contents.value = editor.getMarkdown(); //markdown 저장
    });
</script>
</body>
</html>